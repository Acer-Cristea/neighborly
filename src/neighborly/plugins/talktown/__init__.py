import pathlib
from typing import Any

import neighborly.plugins.talktown.occupation_types as tot_occupations
from neighborly.content_management import OccupationTypeLibrary
from neighborly.loaders import load_data_file
from neighborly.plugins.talktown import business_components
from neighborly.plugins.talktown.personality import (
    BigFivePersonality,
    BigFivePersonalityFactory,
)
from neighborly.plugins.talktown.school import SchoolSystem, Student
from neighborly.simulation import Neighborly, PluginInfo

plugin_info = PluginInfo(
    name="Talk of the Town",
    plugin_id="default.talktown",
    version="0.1.0",
)


def setup(sim: Neighborly, **kwargs: Any) -> None:
    sim.world.add_system(SchoolSystem())

    # Register student component for school system
    sim.register_component(Student)

    # Register Personality component
    sim.register_component(BigFivePersonality, factory=BigFivePersonalityFactory())

    # Register Business components
    sim.register_component(business_components.ApartmentComplex)
    sim.register_component(business_components.Bakery)
    sim.register_component(business_components.Bank)
    sim.register_component(business_components.Bar)
    sim.register_component(business_components.BarberShop)
    sim.register_component(business_components.BlacksmithShop)
    sim.register_component(business_components.Brewery)
    sim.register_component(business_components.BusDepot)
    sim.register_component(business_components.ButcherShop)
    sim.register_component(business_components.CandyStore)
    sim.register_component(business_components.CarpentryCompany)
    sim.register_component(business_components.Cemetery)
    sim.register_component(business_components.CityHall)
    sim.register_component(business_components.ClothingStore)
    sim.register_component(business_components.CoalMine)
    sim.register_component(business_components.ConstructionFirm)
    sim.register_component(business_components.Dairy)
    sim.register_component(business_components.DaycareCenter)
    sim.register_component(business_components.Deli)
    sim.register_component(business_components.DentistOffice)
    sim.register_component(business_components.DepartmentStore)
    sim.register_component(business_components.Diner)
    sim.register_component(business_components.Distillery)
    sim.register_component(business_components.DrugStore)
    sim.register_component(business_components.Farm)
    sim.register_component(business_components.FireStation)
    sim.register_component(business_components.Foundry)
    sim.register_component(business_components.FurnitureStore)
    sim.register_component(business_components.GeneralStore)
    sim.register_component(business_components.GroceryStore)
    sim.register_component(business_components.HardwareStore)
    sim.register_component(business_components.Hospital)
    sim.register_component(business_components.Hotel)
    sim.register_component(business_components.Inn)
    sim.register_component(business_components.InsuranceCompany)
    sim.register_component(business_components.JewelryShop)
    sim.register_component(business_components.LawFirm)
    sim.register_component(business_components.OptometryClinic)
    sim.register_component(business_components.PaintingCompany)
    sim.register_component(business_components.Park)
    sim.register_component(business_components.Pharmacy)
    sim.register_component(business_components.PlasticSurgeryClinic)
    sim.register_component(business_components.PlumbingCompany)
    sim.register_component(business_components.PoliceStation)
    sim.register_component(business_components.Quarry)
    sim.register_component(business_components.RealtyFirm)
    sim.register_component(business_components.Restaurant)
    sim.register_component(business_components.School)
    sim.register_component(business_components.ShoemakerShop)
    sim.register_component(business_components.Supermarket)
    sim.register_component(business_components.TailorShop)
    sim.register_component(business_components.TattooParlor)
    sim.register_component(business_components.Tavern)
    sim.register_component(business_components.TaxiDepot)
    sim.register_component(business_components.University)

    # Register OccupationTypes
    occupation_library = sim.world.get_resource(OccupationTypeLibrary)

    occupation_library.add(tot_occupations.apprentice)
    occupation_library.add(tot_occupations.architect)
    occupation_library.add(tot_occupations.baker)
    occupation_library.add(tot_occupations.banker)
    occupation_library.add(tot_occupations.bank_teller)
    occupation_library.add(tot_occupations.barber)
    occupation_library.add(tot_occupations.barkeeper)
    occupation_library.add(tot_occupations.bartender)
    occupation_library.add(tot_occupations.bottler)
    occupation_library.add(tot_occupations.blacksmith)
    occupation_library.add(tot_occupations.brewer)
    occupation_library.add(tot_occupations.bricklayer)
    occupation_library.add(tot_occupations.builder)
    occupation_library.add(tot_occupations.busboy)
    occupation_library.add(tot_occupations.bus_driver)
    occupation_library.add(tot_occupations.butcher)
    occupation_library.add(tot_occupations.carpenter)
    occupation_library.add(tot_occupations.cashier)
    occupation_library.add(tot_occupations.clothier)
    occupation_library.add(tot_occupations.concierge)
    occupation_library.add(tot_occupations.cook)
    occupation_library.add(tot_occupations.cooper)
    occupation_library.add(tot_occupations.daycare_provider)
    occupation_library.add(tot_occupations.dentist)
    occupation_library.add(tot_occupations.dishwasher)
    occupation_library.add(tot_occupations.distiller)
    occupation_library.add(tot_occupations.doctor)
    occupation_library.add(tot_occupations.dressmaker)
    occupation_library.add(tot_occupations.druggist)
    occupation_library.add(tot_occupations.engineer)
    occupation_library.add(tot_occupations.farmer)
    occupation_library.add(tot_occupations.farmhand)
    occupation_library.add(tot_occupations.fire_chief)
    occupation_library.add(tot_occupations.fire_fighter)
    occupation_library.add(tot_occupations.grocer)
    occupation_library.add(tot_occupations.groundskeeper)
    occupation_library.add(tot_occupations.hotel_maid)
    occupation_library.add(tot_occupations.inn_keeper)
    occupation_library.add(tot_occupations.insurance_agent)
    occupation_library.add(tot_occupations.janitor)
    occupation_library.add(tot_occupations.jeweler)
    occupation_library.add(tot_occupations.joiner)
    occupation_library.add(tot_occupations.laborer)
    occupation_library.add(tot_occupations.landlord)
    occupation_library.add(tot_occupations.lawyer)
    occupation_library.add(tot_occupations.manager)
    occupation_library.add(tot_occupations.miner)
    occupation_library.add(tot_occupations.milkman)
    occupation_library.add(tot_occupations.mayor)
    occupation_library.add(tot_occupations.molder)
    occupation_library.add(tot_occupations.mortician)
    occupation_library.add(tot_occupations.nurse)
    occupation_library.add(tot_occupations.optometrist)
    occupation_library.add(tot_occupations.owner)
    occupation_library.add(tot_occupations.painter)
    occupation_library.add(tot_occupations.pharmacist)
    occupation_library.add(tot_occupations.plasterer)
    occupation_library.add(tot_occupations.plastic_surgeon)
    occupation_library.add(tot_occupations.plumber)
    occupation_library.add(tot_occupations.police_chief)
    occupation_library.add(tot_occupations.police_officer)
    occupation_library.add(tot_occupations.principal)
    occupation_library.add(tot_occupations.professor)
    occupation_library.add(tot_occupations.proprietor)
    occupation_library.add(tot_occupations.puddler)
    occupation_library.add(tot_occupations.quarry_man)
    occupation_library.add(tot_occupations.realtor)
    occupation_library.add(tot_occupations.seamstress)
    occupation_library.add(tot_occupations.secretary)
    occupation_library.add(tot_occupations.stocker)
    occupation_library.add(tot_occupations.shoemaker)
    occupation_library.add(tot_occupations.stonecutter)
    occupation_library.add(tot_occupations.tailor)
    occupation_library.add(tot_occupations.tattoo_artist)
    occupation_library.add(tot_occupations.taxi_driver)
    occupation_library.add(tot_occupations.teacher)
    occupation_library.add(tot_occupations.turner)
    occupation_library.add(tot_occupations.waiter)
    occupation_library.add(tot_occupations.whitewasher)
    occupation_library.add(tot_occupations.woodworker)

    # Load remaining data from data file
    load_data_file(sim, pathlib.Path(__file__).parent / "data.yaml")
